<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title><%= counsellor.name %> Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 dark:bg-gray-900 ">
  <%- include("partials/navbar") %>

  <div class="max-w-5xl  bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-10 ml-64" >
    
    <!-- Header -->
    <header class="mb-8 ">
      <h1 class="text-3xl font-extrabold text-gray-900 dark:text-white"><%= counsellor.name %> Dashboard</h1>
      <p class="text-gray-600 dark:text-gray-300 mt-2"><strong>Email:</strong> <%= counsellor.email %></p>
      <p class="text-gray-600 dark:text-gray-300 mt-1"><strong>Qualification:</strong> <%= counsellor.qualifications %></p>
      <p class="text-gray-600 dark:text-gray-300 mt-1"><strong>Specialization:</strong> <%= counsellor.specialization.charAt(0).toUpperCase() + counsellor.specialization.slice(1) %></p>
      <p class="text-gray-600 dark:text-gray-300 mt-1"><strong>Available Slots:</strong> <%= counsellor.slots.join(", ") %></p>
    </header>

    <!-- Patients Section -->
    <section class="mb-8 ">
      <h2 class="text-2xl font-semibold text-gray-800 dark:text-gray-200 mb-4">Booked Patients</h2>
      
      <% if(counsellor.bookedBy) { %>
        <ul class="space-y-3">
          <li class="p-4 bg-gray-100 dark:bg-gray-700 rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200 flex justify-between items-center">
            <div>
              <span class="font-medium text-gray-900 dark:text-gray-100"><%= counsellor.bookedBy.name %></span>
              <span class="text-gray-600 dark:text-gray-300 ml-2">(<%= counsellor.bookedBy.email %>)</span>
            </div>
            <div class="text-sm">
              <span class="text-gray-700 dark:text-gray-200"><strong>Slot:</strong> <%= counsellor.selectedSlot %></span>
              <% if(counsellor.attended) { %>
                <span class="ml-3 px-2 py-1 bg-green-600 text-white rounded-full text-xs">Attended</span>
              <% } else { %>
                <span class="ml-3 px-2 py-1 bg-yellow-500 text-white rounded-full text-xs">Upcoming</span>
              <% } %>
            </div>
          </li>
        </ul>
      <% } else { %>
        <p class="text-gray-500 dark:text-gray-400">No patients booked yet</p>
      <% } %>
    </section>

    <!-- Actions -->
    <section>
      <h2 class="text-2xl font-semibold text-gray-800 dark:text-gray-200 mb-4">Actions</h2>
      <% if(counsellor.booked && !counsellor.attended) { %>
        <form action="/counsellors/mark-attended" method="POST" class="space-y-2">
          <input type="hidden" name="id" value="<%= counsellor._id %>">
          <button type="submit" class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg shadow-sm transition">
            Mark Session as Attended
          </button>
        </form>
      <% } else { %>
        <p class="text-gray-500 dark:text-gray-400">No actions available</p>
      <% } %>
    </section>

  </div>
</body>
</html>
